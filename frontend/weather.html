<!doctype html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HK Trip Demo</title>
    <link rel="stylesheet" href="./styles.css" />
    <link rel="stylesheet" href="./modal.css" />
  </head>
  <body>
    <header>
      <img src="image/Logo.png" alt="香港行程 Demo" style="height:40px; margin:0;" />
      <nav>
        <a href="index.html">Home</a>
        <a href="weather.html">Plan</a>
        <a href="#itinerary"> Hong Kong Spots</a>
        <a href="Overview.html">Overview</a>
      </nav>
      <div class="toolbar">
        <!--<span class="switch"><input type="checkbox" id="themeToggle" /> 深色模式</span>
        <button id="scrollTopBtn" title="回頂部">Top</button>-->
        <button id="startPlanBtn" class="btn-primary">Start Plan</button>
      </div>
    </header>

    <main>
      <section id="home" class="" data-section="home">
        <div class="hero">
          <h2>🏙️ Travelling Hong Kong AI Planning</h2>
          <div class="hero-sub">Authorized custimized best Hong Kong travel experience</div>
          <div class="search-bar">
            <div class="search-grid">
              
              <div>
                <div class="hero-label">Depart Location</div>
                <input type="text" id="startPlace" placeholder="Hong Kong Airport" />
              </div>
              <div>
                <label for="hero-label" class="hero-label">Depart Date</label>
                <input type="date" id="startDate" />
              </div>
              <div>
                <label for="endDate" class="hero-label">Return Date</label>
                <input type="date" id="endDate" />
              </div>
              <div>
                <button id="createPlanBtn" class="btn-primary">Start Plan</button>
              </div>
            </div>
            <div class="quick-locations">
              <span class="hero-label">Quick Choice：</span>
              <button type="button" id="btnAirport" class="hero-label">✈️ Airport</button>
              <button type="button" id="btnWestKowloon" class="hero-label">🚄 West Kowloon Statation</button>
            </div>
            <div id="planIdWrap" class="hidden plan-info">Plan ID: <span id="planId"></span></div>
          </div>
        </div>
      </section>

      <section id="weather" class="card weather-card hidden" data-section="weather">
        <div class="weather-content" style="display: flex;">
          <div class="weather-left" style="flex:2;"></div>
          <div class="weather-right" style="flex:1;">
            <div class="weather-info">
              <div class="weather-header">
                <h3>🌤️ Weather Suggestion</h3>
                <div class="weather-date" id="weatherDate"></div>
                <div class="weather-status" id="weatherStatus">Getting weather infomation ...</div>
              </div>
              <div class="weather-main" id="weatherMain">
                <div class="weather-temp" id="weatherTemp">--°C</div>
                <div class="weather-desc" id="weatherDesc">Loading...</div>
              </div>
            </div>
            <div class="weather-advice" id="weatherAdvice">
              <div class="advice-title">💡 Suggestion</div>
              <div class="advice-content" id="adviceContent">Analyzing Suggestion...</div>
            </div>
          </div>
        </div>
      </section>

      <section id="qa" class="card qa-card hidden" data-section="qa">
        <h3>Personalized Quiz</h3>
        <div class="qa-subtitle">This Quiz able to let us know more about your trip preference</div>
        <div id="qaWizard">
          <div class="row" style="justify-content:space-between">
            <div id="qaProgressText">1 / 3</div>
            <div class="qa-progress" style="flex:1; max-width: 300px"><div id="qaProgressBar"></div></div>
          </div>
          <div id="qaQuestion" style="margin:8px 0">What are you most looking forward to on this trip?</div>
          <div class="grid" id="qaChoices"></div>
          <div id="qaStatus"></div>
          <div style="margin-top:8px">
            <button id="qaPrev">Previous Question</button>
            <button id="qaNext" class="btn-primary">Next Qiestion</button>
          </div>
        </div>
      </section>

      <section id="itinerary" class="card itinerary-card hidden" data-section="itinerary">
        <h3>📋 Your Cutstomize Plan</h3>
        <div class="itinerary-subtitle">A perfect journey tailored to your preferences.</div>
        <div class="day-tabs" id="dayTabs"></div>
        <div class="row" style="margin-bottom:8px">
          <button id="regenBtn">Regenerate</button>
        </div>
        <div class="slot-container">
          <div class="slot-list" id="slotList"></div>
          <div class="stack" id="cardStack"></div>
        </div>
        
        <!-- AI Agent -->
        <div class="ai-agent" id="aiAgent">
          <img src="romer_frog.png" alt="AI Assistant" class="ai-avatar" />
        </div>
        
        <!-- Chat Room -->
        <div class="chat-room hidden" id="chatRoom">
          <div class="chat-header">
            <span>🐸 Liui Froggy 🐸</span>
            <button class="chat-close" id="chatClose"><b>✕</b></button>
          </div>
          <div class="chat-messages" id="chatMessages">
            <div class="message ai-message">
              <div class="message-content">
                "Hello! I am your AI travel assistant 🐸<br>
                  I can help you adjust your itinerary, recommend attractions, or automatically complete travel planning.<br>
                  Is there anything you need assistance with?"
              </div>
            </div>
          </div>
          <div class="chat-input">
            <textarea id="chatTextarea" placeholder="Entering your needs..." rows="2"></textarea>
            <button id="chatSend" class="btn-primary">Send</button>
          </div>
        </div>
      </section>

      <section id="overview" class="card" data-section="overview">
        <h3>🎯 Travel Plan Overview</h3>
        
        <!-- AI Overview Section -->
        <div class="ai-overview-section" style="margin-bottom: 24px; padding: 16px; background: #f8f9fa; border-radius: 8px;">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
            <h4 style="margin: 0;">🤖 AI Travel Analysis</h4>
            <button id="voiceOverviewBtn" class="round-btn" title="Listen to overview" disabled style="background: #0a7; color: white;">🔊</button>
          </div>
          <div id="aiOverviewText" style="line-height: 1.6; color: #333;">Generating AI analysis of your travel plan...</div>
        </div>
        
        <!-- Selected Items Summary -->
        <div style="margin-bottom: 20px;">
          <h4>📋 Your Selected Items</h4>
          <div id="overviewSummary" class="row" style="gap:6px; flex-wrap:wrap"></div>
        </div>
        
        <!-- Export Buttons -->
        <div style="margin-bottom: 20px;">
          <h4>📤 Export Your Plan</h4>
          <div class="export-buttons" style="display: flex; gap: 12px; flex-wrap: wrap;">
            <button id="googleMapsBtn" class="btn-primary" onclick="exportToGoogleMaps()" style="background: #4285f4;">🗺️ Open in Google Maps</button>
            <button id="googleCalendarBtn" class="btn-primary" onclick="exportToGoogleCalendar()" style="background: #34a853;">📅 Add to Google Calendar</button>
            <button id="pdfBtn">📄 Export PDF</button>
            <button id="icsBtn">📅 Export ICS</button>
          </div>
          <div id="pdfLink" style="margin-top: 8px;"></div>
        </div>
        
        <!-- Plan Details (Collapsible) -->
        <details style="margin-top: 20px;">
          <summary style="cursor: pointer; font-weight: bold; margin-bottom: 12px;">🔍 View Plan Details (JSON)</summary>
          <pre id="overviewJson" style="white-space:pre-wrap; background: #f5f5f5; padding: 12px; border-radius: 4px; font-size: 12px; max-height: 300px; overflow-y: auto;"></pre>
        </details>
        
        <button id="finalizeBtn" style="margin-top: 16px;">✅ Finalize Plan</button>
      </section>
    </main>

    <script src="./modal.js" defer></script>
    <script src="./app_final.js" defer></script>
  </body>
  </html>


