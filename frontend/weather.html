<!doctype html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HK Trip Demo</title>
    <link rel="stylesheet" href="./styles.css" />
    <link rel="stylesheet" href="./modal.css" />
  </head>
  <body>
    <header>
      <img src="image/Logo.png" alt="香港行程 Demo" style="height:40px; margin:0;" />
      <nav>
        <a href="#home">Home</a>
        <a href="#qa">About Us</a>
        <a href="#itinerary"> Hong Kong Spots</a>
        <a href="#overview">Contact Us</a>
      </nav>
      <div class="toolbar">
        <!--<span class="switch"><input type="checkbox" id="themeToggle" /> 深色模式</span>
        <button id="scrollTopBtn" title="回頂部">Top</button>-->
        <button id="startPlanBtn" class="btn-primary">Start Plan</button>
      </div>
    </header>

    <main>

      <section id="home" class="" data-section="home">
        <div class="hero">
          <h3>Travel Planning Hong Kong</h3>
          <div class="hero-sub">AI 為您量身打造最佳旅遊體驗，從住宿到美食一應俱全</div>
          <div class="search-grid">
            <div class="hero-label">
                <label for="startPlace" style="margin-bottom: 4px;">Depart From</label>
                <input type="text" id="startPlace" placeholder="Hong Kong International Airport" />
            </div>
            <div class="hero-label">
                <label for="startDate" style="margin-bottom: 4px;">Depart Date</label>
                <input type="date" id="startDate" />
            </div>
            <div class="hero-label">
                <label for="endDate" style="margin-bottom: 4px;">Reture Date</label>
                <input type="date" id="endDate" />
            </div>
            <div class="hero-button">
                <button id="createPlanBtn" class="btn-primary">Start Plan</button>
            </div>
            <div id="planIdWrap" class="hidden plan-info">Plan ID: <span id="planId"></span></div>
          </div>
        </div>
      </section>

      <section id="weather" class="card weather-card hidden" data-section="weather">
        <div class="weather-header">
          <h3>🌤️ 天氣建議</h3>
          <div class="weather-date" id="weatherDate"></div>
          <div class="weather-status" id="weatherStatus">正在獲取天氣資訊...</div>
        </div>

        <div class="weather-content">
          <div class="weather-info">
            <div class="weather-main" id="weatherMain">
              <div class="weather-temp" id="weatherTemp">--°C</div>
              <div class="weather-desc" id="weatherDesc">載入中...</div>
            </div>
          </div>
          <div class="weather-advice" id="weatherAdvice">
            <div class="advice-title">💡 旅遊建議</div>
            <div class="advice-content" id="adviceContent">正在分析最佳旅遊建議...</div>
          </div>
        </div>
    </section>

      <section id="qa" class="card qa-card hidden" data-section="qa">
        <h3>🤔 個人化問答</h3>
        <div class="qa-subtitle">幫助我們了解您的旅遊偏好，為您推薦最合適的行程</div>
        <div id="qaWizard">
          <div class="row" style="justify-content:space-between">
            <div id="qaProgressText">1 / 3</div>
            <div class="qa-progress" style="flex:1; max-width: 300px"><div id="qaProgressBar"></div></div>
          </div>
          <div id="qaQuestion" style="margin:8px 0">你此行最期待的是？</div>
          <div class="grid" id="qaChoices"></div>
          <div id="qaStatus"></div>
          <div style="margin-top:8px">
            <button id="qaPrev">上一題</button>
            <button id="qaNext" class="btn-primary">下一題</button>
          </div>
        </div>
      </section>

      <section id="itinerary" class="card itinerary-card hidden" data-section="itinerary">
        <h3>📋 您的專屬行程</h3>
        <div class="itinerary-subtitle">根據您的偏好量身打造的完美旅程</div>
        <div class="day-tabs" id="dayTabs"></div>
        <div class="row" style="margin-bottom:8px">
          <button id="regenBtn">重新生成</button>
        </div>
        <div class="slot-container">
          <div class="slot-list" id="slotList"></div>
          <div class="stack" id="cardStack"></div>
        </div>
        
        <!-- AI Agent -->
        <div class="ai-agent" id="aiAgent">
          <img src="romer_frog.png" alt="AI Assistant" class="ai-avatar" />
        </div>
        
        <!-- Chat Room -->
        <div class="chat-room hidden" id="chatRoom">
          <div class="chat-header">
            <span>🐸 盧氏小樹蛙 🐸</span>
            <button class="chat-close" id="chatClose"><b>✕</b></button>
          </div>
          <div class="chat-messages" id="chatMessages">
            <div class="message ai-message">
              <div class="message-content">
                你好！我是你的AI旅遊助手 🐸<br>
                我可以幫你調整行程、推薦景點，或自動完成旅遊規劃。<br>
                有什麼需要協助的嗎？
              </div>
            </div>
          </div>
          <div class="chat-input">
            <textarea id="chatTextarea" placeholder="輸入你的需求..." rows="2"></textarea>
            <button id="chatSend" class="btn-primary">發送</button>
          </div>
        </div>
      </section>

      <section id="overview" class="card" data-section="overview">
        <h3>Overview & Export</h3>
        <div id="overviewSummary" class="row" style="gap:6px; flex-wrap:wrap"></div>
        <pre id="overviewJson" style="white-space:pre-wrap"></pre>
        <button id="finalizeBtn">Finalize</button>
        <button id="pdfBtn">Export PDF</button>
        <button id="icsBtn">Export ICS</button>
        <div id="pdfLink"></div>
      </section>
    </main>

    <script src="./modal.js" defer></script>
    <script src="./app_final.js" defer></script>
  </body>
  </html>


